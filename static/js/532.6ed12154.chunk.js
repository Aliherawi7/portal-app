"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[532],{2065:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(9439),o=n(2791),s=n(1413),i=n(7689),l=n(2282),r=n(1313),u=n(4938),d=n(1956),p=n(9812),c=n(899),h=n(4119),v=n(3943),Z=n(184),b=function(e){var t=e.setApiResponse;(0,r.Z)({roles:[d.Z.ADMIN]});var n=(0,i.UO)().id,b=(0,o.useState)({}),T=(0,a.Z)(b,2),N=(T[0],T[1]),_=(0,l.K1)(),f=(0,a.Z)(_,2),D=f[0],R=f[1];(0,o.useEffect)((function(){fetch(u.Z.root+u.Z.students.getStudent(n),{method:"GET",headers:{Authorization:"Bearer "+D.authentication.token}}).then((function(e){if(e.ok)return e.json()})).then((function(e){N(e),R({type:h.Hp.ADD_STUDENT_PERONAL_INFO,payload:e.studentPersonalInfo}),R({type:h.Hp.ADD_STUDENT_IMAGE,payload:{file:null,url:e.imageUrl,isOk:!0}}),R({type:h.Hp.ADD_STUDENT_IDENTIFICATION,payload:e.identification});var t={};e.relatives.forEach((function(e){"\u067e\u062f\u0631"==e.relationship?t=(0,s.Z)((0,s.Z)({},t),{},{father:e}):"\u06a9\u0627\u06a9\u0627"==e.relationship?t=(0,s.Z)((0,s.Z)({},t),{},{uncle:e}):"\u0645\u0627\u0645\u0627"==e.relationship?t=(0,s.Z)((0,s.Z)({},t),{},{aunt:e}):"\u0628\u0631\u0627\u062f\u0631"==e.relationship&&(t=(0,s.Z)((0,s.Z)({},t),{},{brother:e}))})),R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:t});var n={};e.locations.forEach((function(e){n=e.current?(0,s.Z)((0,s.Z)({},n),{},{previous:e}):(0,s.Z)((0,s.Z)({},n),{},{current:e})})),R({type:h.Hp.ADD_STIUDENT_LOCATIONS,payload:n})}))}),[n]);var j=function(e,n){var a=new FormData;a.append("file",n),fetch(e,{method:"POST",headers:{Authorization:"Bearer "+D.authentication.token},body:a}).then((function(e){return e.json()})).then((function(e){201!=e.statusCode?t(e):t((0,s.Z)((0,s.Z)({},e),{},{isFinished:!0}))}))},y=function(e,t){switch(t){case"\u067e\u062f\u0631.name":var n;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{father:(0,s.Z)((0,s.Z)({},null===(n=D.studentRelations)||void 0===n?void 0:n.father),{},{name:e.target.value,relationship:"\u067e\u062f\u0631"})})});break;case"\u067e\u062f\u0631.job":var a;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{father:(0,s.Z)((0,s.Z)({},null===(a=D.studentRelations)||void 0===a?void 0:a.father),{},{job:e.target.value})})});break;case"\u067e\u062f\u0631.jobLocation":var o;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{father:(0,s.Z)((0,s.Z)({},null===(o=D.studentRelations)||void 0===o?void 0:o.father),{},{jobLocation:e.target.value})})});break;case"\u067e\u062f\u0631.phoneNumber":var i;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{father:(0,s.Z)((0,s.Z)({},null===(i=D.studentRelations)||void 0===i?void 0:i.father),{},{phoneNumber:e.target.value})})});break;case"\u06a9\u0627\u06a9\u0627.name":var l;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{uncle:(0,s.Z)((0,s.Z)({},null===(l=D.studentRelations)||void 0===l?void 0:l.uncle),{},{name:e.target.value,relationship:"\u06a9\u0627\u06a9\u0627"})})});break;case"\u06a9\u0627\u06a9\u0627.job":var r;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{uncle:(0,s.Z)((0,s.Z)({},null===(r=D.studentRelations)||void 0===r?void 0:r.uncle),{},{job:e.target.value})})});break;case"\u06a9\u0627\u06a9\u0627.jobLocation":var u;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{uncle:(0,s.Z)((0,s.Z)({},null===(u=D.studentRelations)||void 0===u?void 0:u.uncle),{},{jobLocation:e.target.value})})});break;case"\u06a9\u0627\u06a9\u0627.phoneNumber":var d;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{uncle:(0,s.Z)((0,s.Z)({},null===(d=D.studentRelations)||void 0===d?void 0:d.uncle),{},{phoneNumber:e.target.value})})});break;case"\u0645\u0627\u0645\u0627.name":var p;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{aunt:(0,s.Z)((0,s.Z)({},null===(p=D.studentRelations)||void 0===p?void 0:p.aunt),{},{name:e.target.value,relationship:"\u0645\u0627\u0645\u0627"})})});break;case"\u0645\u0627\u0645\u0627.job":var c;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{aunt:(0,s.Z)((0,s.Z)({},null===(c=D.studentRelations)||void 0===c?void 0:c.aunt),{},{job:e.target.value})})});break;case"\u0645\u0627\u0645\u0627.jobLocation":var v;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{aunt:(0,s.Z)((0,s.Z)({},null===(v=D.studentRelations)||void 0===v?void 0:v.aunt),{},{jobLocation:e.target.value})})});break;case"\u0645\u0627\u0645\u0627.phoneNumber":var Z;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{aunt:(0,s.Z)((0,s.Z)({},null===(Z=D.studentRelations)||void 0===Z?void 0:Z.aunt),{},{phoneNumber:e.target.value})})});break;case"\u0628\u0631\u0627\u062f\u0631.name":var b;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{brother:(0,s.Z)((0,s.Z)({},null===(b=D.studentRelations)||void 0===b?void 0:b.brother),{},{name:e.target.value,relationship:"\u0628\u0631\u0627\u062f\u0631"})})});break;case"\u0628\u0631\u0627\u062f\u0631.job":var T;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{brother:(0,s.Z)((0,s.Z)({},null===(T=D.studentRelations)||void 0===T?void 0:T.brother),{},{job:e.target.value})})});break;case"\u0628\u0631\u0627\u062f\u0631.jobLocation":var N;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{brother:(0,s.Z)((0,s.Z)({},null===(N=D.studentRelations)||void 0===N?void 0:N.brother),{},{jobLocation:e.target.value})})});break;case"\u0628\u0631\u0627\u062f\u0631.phoneNumber":var _;R({type:h.Hp.ADD_STUDENT_RELATIONS,payload:(0,s.Z)((0,s.Z)({},D.studentRelations),{},{brother:(0,s.Z)((0,s.Z)({},null===(_=D.studentRelations)||void 0===_?void 0:_.brother),{},{phoneNumber:e.target.value})})})}};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"updateStudent",children:(0,Z.jsxs)("div",{className:"update_detail",children:[(0,Z.jsx)("h1",{className:"text_align_center",children:"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u062d\u0635\u0644"}),(0,Z.jsx)("div",{className:"form_details_student personal_info right-to-left",children:(0,Z.jsx)(p.o,{updatedMode:!0})}),(0,Z.jsx)("div",{className:"form_details_student student_habitation left-to-right",children:(0,Z.jsx)(c.X,{})}),D.studentRelations&&Object.keys(D.studentRelations).map((function(e){return e=D.studentRelations[e],(0,Z.jsxs)("div",{className:"form_details_student student_relatives left-to-right",children:[(0,Z.jsx)("div",{className:"add_student_stepper_title",children:(0,Z.jsxs)("h3",{children:["\u06a9\u0627\u06a9\u0627"===e.relationship||"\u0645\u0627\u0645\u0627"===e.relationship?e.relationship+"\u06cc":e.relationship," ","\u0645\u0640\u062d\u0640\u0635\u0644"]})}),(0,Z.jsxs)("section",{className:"build_boxes",children:[(0,Z.jsxs)("div",{className:"build_box",children:[(0,Z.jsx)("label",{children:"\u0646\u0627\u0645"}),(0,Z.jsx)("input",{type:"text",value:e.name,onChange:function(t){return y(t,e.relationship+".name")}})]}),(0,Z.jsxs)("div",{className:"build_box",children:[(0,Z.jsx)("label",{children:"\u0648\u0638\u06cc\u0641\u0647"}),(0,Z.jsx)("input",{type:"text",value:e.job,onChange:function(t){return y(t,e.relationship+".job")}})]}),(0,Z.jsxs)("div",{className:"build_box",children:[(0,Z.jsx)("label",{children:"\u0645\u062d\u0644 \u0648\u0638\u06cc\u0641\u0647"}),(0,Z.jsx)("input",{type:"text",value:e.jobLocation,onChange:function(t){return y(t,e.relationship+".jobLocation")}})]}),(0,Z.jsxs)("div",{className:"build_box",children:[(0,Z.jsx)("label",{children:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0645\u0627\u0633"}),(0,Z.jsx)("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:e.phoneNumber,onChange:function(t){return y(t,e.relationship+".phoneNumber")}})]})]})]},e.relationship)}))]})}),(0,Z.jsx)("div",{className:"text_align_center",style:{paddingTop:"1rem"},children:(0,Z.jsx)(v.Z,{text:"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0627\u0637\u0644\u0627\u0639\u0627\u062a",onClick:function(){var e=[];for(var a in D.studentRelations)e.push(D.studentRelations[a]);var o={studentPersonalInfo:D.studentPersonalInfo,relatives:e,locations:D.studentLocations,identification:D.studentIdenfication};fetch(u.Z.root+u.Z.students.updateStudent(n),{method:"PUT",headers:{Authorization:"Bearer "+D.authentication.token,"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){D.studentImage.file&&j(e.imageUrl,D.studentImage.file),t((0,s.Z)((0,s.Z)({},e),{},{show:!0}))})).catch((function(e){return t(e)}))}})})]})},T=n(1925),N=n(1346),_=n(694),f=function(){var e=(0,i.s0)(),t=(0,o.useState)({}),n=(0,a.Z)(t,2),s=n[0],l=n[1];return(0,Z.jsxs)("div",{className:"update_student_page fade_in ",children:[(0,Z.jsx)(b,{setApiResponse:l}),(0,Z.jsx)(T.Z,{show:s.show,children:(0,Z.jsx)(N.Z,{messageType:"info",firstBtn:{btnText:"\u062a\u0627\u06cc\u06cc\u062f",onClick:function(){return e("/admin/students")}},message:s.message,iconType:_.Z.info})})]})}}}]);
//# sourceMappingURL=532.6ed12154.chunk.js.map