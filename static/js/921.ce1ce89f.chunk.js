"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[921],{1389:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var l=t(1413),a=t(9439),i=t(2791),o=t(2282),s=t(3433),d=t(694),r=t(184),u=function(e){var n=e.steps,t=e.currentStep,o=(0,i.useState)([]),u=(0,a.Z)(o,2),c=u[0],h=u[1],p=(0,i.useRef)();(0,i.useEffect)((function(){var e=n.map((function(e,n){return Object.assign({},{description:e,completed:!1,highlighted:0===n,selected:0===n})}));p.current=e;var a=function(e,n){for(var t=(0,s.Z)(n),a=0;a<t.length;)a===e?(t[a]=(0,l.Z)((0,l.Z)({},t[a]),{},{highlighted:!0,selected:!0,completed:!0}),a++):a<e?(t[a]=(0,l.Z)((0,l.Z)({},t[a]),{},{highlighted:!1,selected:!0,completed:!0}),a++):(t[a]=(0,l.Z)((0,l.Z)({},t[a]),{},{highlighted:!1,selected:!1,completed:!1}),a++);return t}(t,p.current);h(a)}),[n,t]);var v=c.map((function(e,n){return(0,r.jsxs)("div",{className:n!==c.length-1?"full-width display_stepper fade_in":"display_stepper fade_in",children:[(0,r.jsxs)("div",{className:"display_nums_des display_flex align_items_center justify_content_center flex_direction_column text_align_center",children:[(0,r.jsx)("div",{className:"display_nums display_flex align_items_center justify_content_center ".concat(e.selected?"numbers_completed":""),children:e.completed?(0,r.jsx)("span",{className:"display_flex",children:(0,r.jsx)("i",{className:d.Z.checkLg})}):(0,r.jsx)("span",{children:n+1})}),(0,r.jsx)("div",{className:"display_des display_flex ".concat(e.highlighted?"description_highlighted":"description_not_highlighted"),children:(0,r.jsx)("p",{className:"text_color",children:e.description})})]}),(0,r.jsx)("div",{className:"display_line ".concat(e.completed?"display_line_completed":"display_line_not_completed")})]},n)}));return(0,r.jsx)("div",{className:"stepper display_flex align_items_center justify_content_space_between",children:v})},c=function(e){var n=e.handleNextStep,t=e.currentStep,l=e.steps,a=e.isFinished;return(0,r.jsxs)("div",{className:"button_control display_flex align_items_center justify_content_space_around",children:[t===l.length-1&&a?null:(0,r.jsx)("button",{onClick:function(){return n("back")},className:"back_btn btn",children:"\u0628\u0627\u0632\u06af\u0634\u062a"}),t===l.length-2?(0,r.jsx)("button",{onClick:function(){return n("next")},className:"back_btn btn",children:"\u062a\u0627\u06cc\u06cc\u062f \u0648 \u0627\u0631\u0633\u0627\u0644"}):t===l.length-1&&a?(0,r.jsx)("button",{onClick:function(){return n("next")},className:"back_btn btn",children:"\u067e\u0627\u06cc\u0627\u0646"}):t<l.length-1?(0,r.jsx)("button",{onClick:function(){return n("next")},className:"back_btn btn",children:"\u0628\u0639\u062f\u06cc"}):null]})},h=t(9812),p=t(899),v=(t(1593),t(4119)),b=t(7689),x=t(1313),_=t(1956),j=t(4938),m=[h.o,p.X,function(){var e,n,t,i,s,d,u,c,h,p,b,x,_,j,m,N,f=(0,o.K1)(),Z=(0,a.Z)(f,2),g=Z[0].studentRelations,y=Z[1],T=function(e,n){switch(n){case"father.name":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{father:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.father),{},{name:e.target.value,relationship:"\u067e\u062f\u0631"})})});break;case"father.job":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{father:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.father),{},{job:e.target.value})})});break;case"father.jobLocation":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{father:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.father),{},{jobLocation:e.target.value})})});break;case"father.phoneNumber":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{father:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.father),{},{phoneNumber:e.target.value})})});break;case"uncle.name":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{uncle:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.uncle),{},{name:e.target.value,relationship:"\u06a9\u0627\u06a9\u0627"})})});break;case"uncle.job":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{uncle:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.uncle),{},{job:e.target.value})})});break;case"uncle.jobLocation":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{uncle:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.uncle),{},{jobLocation:e.target.value})})});break;case"uncle.phoneNumber":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{uncle:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.uncle),{},{phoneNumber:e.target.value})})});break;case"aunt.name":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{aunt:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.aunt),{},{name:e.target.value,relationship:"\u0645\u0627\u0645\u0627"})})});break;case"aunt.job":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{aunt:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.aunt),{},{job:e.target.value})})});break;case"aunt.jobLocation":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{aunt:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.aunt),{},{jobLocation:e.target.value})})});break;case"aunt.phoneNumber":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{aunt:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.aunt),{},{phoneNumber:e.target.value})})});break;case"brother.name":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{brother:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.brother),{},{name:e.target.value,relationship:"\u0628\u0631\u0627\u062f\u0631"})})});break;case"brother.job":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{brother:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.brother),{},{job:e.target.value})})});break;case"brother.jobLocation":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{brother:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.brother),{},{jobLocation:e.target.value})})});break;case"brother.phoneNumber":y({type:v.Hp.ADD_STUDENT_RELATIONS,payload:(0,l.Z)((0,l.Z)({},g),{},{brother:(0,l.Z)((0,l.Z)({},null===g||void 0===g?void 0:g.brother),{},{phoneNumber:e.target.value})})})}};return(0,r.jsxs)("div",{className:"form_details_student student_relatives left-to-right",children:[(0,r.jsx)("div",{className:"add_student_stepper_title",children:(0,r.jsx)("h3",{children:"\u067e\u0640\u062f\u0631 \u0645\u062d\u0640\u0635\u0644"})}),(0,r.jsxs)("section",{className:"build_boxes",children:[(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0646\u0640\u0627\u0645"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(e=g.father)||void 0===e?void 0:e.name,onChange:function(e){return T(e,"father.name")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0648\u0638\u06cc\u0640\u0641\u0640\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(n=g.father)||void 0===n?void 0:n.job,onChange:function(e){return T(e,"father.job")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0645\u0640\u062d\u0644 \u0648\u0638\u06cc\u0640\u0641\u0640\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(t=g.father)||void 0===t?void 0:t.jobLocation,onChange:function(e){return T(e,"father.jobLocation")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0634\u0640\u0645\u0640\u0627\u0631\u0647 \u062a\u0640\u0645\u0640\u0627\u0633"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:null===g||void 0===g||null===(i=g.father)||void 0===i?void 0:i.phoneNumber,onChange:function(e){return T(e,"father.phoneNumber")}})]})]}),(0,r.jsx)("div",{className:"add_student_stepper_title",children:(0,r.jsx)("h3",{children:"\u06a9\u0640\u0627\u06a9\u0640\u0627\u06cc \u0645\u062d\u0640\u0635\u0644"})}),(0,r.jsxs)("section",{className:"build_boxes",children:[(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0646\u0640\u0627\u0645"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(s=g.uncle)||void 0===s?void 0:s.name,onChange:function(e){return T(e,"uncle.name")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0648\u0638\u06cc\u0640\u0641\u0640\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(d=g.uncle)||void 0===d?void 0:d.job,onChange:function(e){return T(e,"uncle.job")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0645\u0640\u062d\u0644 \u0648\u0638\u06cc\u0640\u0641\u0640\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(u=g.uncle)||void 0===u?void 0:u.jobLocation,onChange:function(e){return T(e,"uncle.jobLocation")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0634\u0640\u0645\u0640\u0627\u0631\u0647 \u062a\u0640\u0645\u0640\u0627\u0633"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:null===g||void 0===g||null===(c=g.uncle)||void 0===c?void 0:c.phoneNumber,onChange:function(e){return T(e,"uncle.phoneNumber")}})]})]}),(0,r.jsx)("div",{className:"add_student_stepper_title",children:(0,r.jsx)("h3",{children:"\u0645\u0640\u0627\u0645\u0640\u0627\u06cc \u0645\u062d\u0640\u0635\u0644"})}),(0,r.jsxs)("section",{className:"build_boxes",children:[(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0646\u0640\u0627\u0645"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(h=g.aunt)||void 0===h?void 0:h.name,onChange:function(e){return T(e,"aunt.name")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0648\u0638\u0640\u06cc\u0641\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(p=g.aunt)||void 0===p?void 0:p.job,onChange:function(e){return T(e,"aunt.job")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0645\u0640\u062d\u0644 \u0648\u0638\u0640\u06cc\u0641\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(b=g.aunt)||void 0===b?void 0:b.jobLocation,onChange:function(e){return T(e,"aunt.jobLocation")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0634\u0640\u0645\u0640\u0627\u0631\u0647 \u062a\u0640\u0645\u0640\u0627\u0633"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:null===g||void 0===g||null===(x=g.aunt)||void 0===x?void 0:x.phoneNumber,onChange:function(e){return T(e,"aunt.phoneNumber")}})]})]}),(0,r.jsx)("div",{className:"add_student_stepper_title",children:(0,r.jsx)("h3",{children:"\u0628\u0631\u0627\u062f\u0631 \u0645\u062d\u0635\u0644 / \u0634\u0648\u0647\u0631(\u062e\u0627\u0646\u0645 \u0647\u0627)"})}),(0,r.jsxs)("section",{className:"build_boxes",children:[(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0646\u0640\u0627\u0645"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(_=g.brother)||void 0===_?void 0:_.name,onChange:function(e){return T(e,"brother.name")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0648\u0638\u0640\u06cc\u0641\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(j=g.brother)||void 0===j?void 0:j.job,onChange:function(e){return T(e,"brother.job")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0645\u0640\u062d\u0644 \u0648\u0638\u0640\u06cc\u0641\u0647"}),(0,r.jsx)("input",{type:"text",value:null===g||void 0===g||null===(m=g.brother)||void 0===m?void 0:m.jobLocation,onChange:function(e){return T(e,"brother.jobLocation")}})]}),(0,r.jsxs)("div",{className:"build_box",children:[(0,r.jsx)("label",{children:"\u0634\u0640\u0645\u0640\u0627\u0631\u0647 \u062a\u0640\u0645\u0640\u0627\u0633"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:!0,value:null===g||void 0===g||null===(N=g.brother)||void 0===N?void 0:N.phoneNumber,onChange:function(e){return T(e,"brother.phoneNumber")}})]})]})]})},function(e){var n,t=e.apiResponse;return(0,r.jsx)("div",{className:"complete_step",children:(0,r.jsx)("div",{className:"complete_details",children:null===(n=t.message)||void 0===n?void 0:n.split("|").map((function(e,n){return(0,r.jsx)("span",{className:"message_holder",children:e},n)}))})})}],N=0,f=function(){(0,x.Z)({roles:[_.Z.ADMIN]});var e=(0,b.s0)(),n=["\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0634\u062e\u0635\u06cc","\u062a\u0630\u06a9\u0631\u0647 \u0648 \u0633\u06a9\u0648\u0646\u062a \u0645\u062d\u0635\u0644","\u0627\u0642\u0627\u0631\u0628 \u0645\u062d\u0635\u0644","\u0628\u062e\u0634 \u0622\u062e\u0631"],t=(0,o.K1)(),s=(0,a.Z)(t,2),d=s[0],h=s[1],p=(0,i.useState)({component:m[N]}),f=(0,a.Z)(p,2),Z=f[0],g=f[1],y=(0,i.useState)({}),T=(0,a.Z)(y,2),D=T[0],S=T[1],E=function(){var e,n=[];for(var t in d.studentRelations)n.push(d.studentRelations[t]);var a={studentPersonalInfo:d.studentPersonalInfo,relatives:n,locations:d.studentLocations,identification:d.studentIdenfication};null!==d&&void 0!==d&&null!==(e=d.studentImage)&&void 0!==e&&e.file?fetch(j.Z.root+j.Z.students.addStudent,{method:"POST",headers:{Authorization:"Bearer "+d.authentication.token,"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){null!==e&&void 0!==e&&e.statusCode&&201!=e.statusCode?S((0,l.Z)((0,l.Z)({},e),{},{isFinished:!1})):A(e.imageUrl,d.studentImage.file)})).catch((function(e){return S(e)})):S({isFinished:!1,message:"\u0644\u0637\u0641\u0627 \u0639\u06a9\u0633 \u0645\u062d\u0635\u0644 \u0631\u0627 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u0626\u06cc\u062f!"})},A=function(e,n){var t=new FormData;t.append("file",n),fetch(e,{method:"POST",headers:{Authorization:"Bearer "+d.authentication.token},body:t}).then((function(e){return e.json()})).then((function(e){201!=e.statusCode?S(e):S((0,l.Z)((0,l.Z)({},e),{},{isFinished:!0}))}))};return(0,r.jsxs)("div",{className:"add_new fade_in border_radius_8",children:[(0,r.jsx)("div",{className:"stepper_step",children:(0,r.jsx)(u,{steps:n,currentStep:N})}),(0,r.jsx)("div",{className:"",children:N<m.length-1?(0,r.jsx)(Z.component,{}):(0,r.jsx)(Z.component,{apiResponse:D})}),(0,r.jsx)(c,{handleNextStep:function(t){if("back"!=t||0!=N){if("next"==t&&N==n.length-2&&(S({}),E()),"next"==t&&N==n.length-1)return N=0,h({type:v.Hp.REMOVE_STUDENT_REGISTERATION_STATE}),void e("/admin/students");"next"===t&&N>=0&&N<n.length?N++:N--,g({component:m[N]})}else e("/admin/students")},currentStep:N,steps:n,isFinished:null===D||void 0===D?void 0:D.isFinished})]})}}}]);
//# sourceMappingURL=921.ce1ce89f.chunk.js.map